<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>سكريبت php بسيط لرفع ملف &#8211; موقع ملهم</title> <meta name="description" content="شغف المعرفة"> <meta name="keywords" content="PHP, برمجة"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/assets/img/logo.png"> <meta name="twitter:title" content="سكريبت php بسيط لرفع ملف"> <meta name="twitter:description" content="نقدم لكم سكريبت بسيط بلغة php لرفع ملف .يستخدم هذا السكريبت لرفع صور أو ملفات من نوع آخر لسيرفرك ،"> <!-- Open Graph --> <meta property="og:locale" content="ar_SY"> <meta property="og:type" content="article"> <meta property="og:title" content="سكريبت php بسيط لرفع ملف"> <meta property="og:description" content="نقدم لكم سكريبت بسيط بلغة php لرفع ملف .يستخدم هذا السكريبت لرفع صور أو ملفات من نوع آخر لسيرفرك ،"> <meta property="og:url" content="http://localhost:4000/php-script-to-upload-file/"> <meta property="og:site_name" content="موقع ملهم"> <meta property="og:image" content="http://localhost:4000/assets/img/logo.png"> <script> var host = "mulham.github.io"; if ((host == window.location.host) && (window.location.protocol != "https:")) window.location.protocol = "https"; </script> <meta name="yandex-verification" content="ea5684dc21acccc9" /> <link rel="canonical" href="http://localhost:4000/php-script-to-upload-file/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="موقع ملهم Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"> </script> <script> (adsbygoogle = window.adsbygoogle || []).push({ google_ad_client: "ca-pub-4752855256699204", enable_page_level_ads: true }); </script> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">عرض القائمة</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">الرئيسيّة</a></li> <li> <a href="#">عن الموقع</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/logo.png" alt="موقع ملهم photo" class="author-photo"> <h4>موقع ملهم</h4> <p>شغف المعرفة</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">تعرّف أكثر</span></a></li> <li> <a href="mailto:mulham94@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> البريد الإلكتروني</a> </li> <li> <a href="http://github.com/mulham" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="https://youtube.com/user/mulham94" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-youtube-square"></i> يوتيوب</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="http://localhost:4000/posts/">المدونة</a> </li> <li><a href="http://localhost:4000/tutorials/" >الدروس</a></li> <li><a href="http://localhost:4000/urls" >روابط مفيدة</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>سكريبت php بسيط لرفع ملف</h1> <h4>19 Jun 2016</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> مدة القراءة ~ 2 دقيقة </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> <a class="btn zoombtn" href="https://github.com/Mulham/mulham.github.io/tree/master/_posts/2016-06-19-php-script-to-upload-file.md">عدِّل هذه الصفحة</a> </div> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- desktop --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4752855256699204" data-ad-slot="3888202602" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <p>نقدم لكم سكريبت بسيط بلغة php لرفع ملف .</p> <p>يستخدم هذا السكريبت لرفع صور أو ملفات من نوع آخر لسيرفرك ،<!--more--> حيث يحتوي على نموذج بلغة <code class="highlighter-rouge">HTML</code> فيه حقل لرفع ملف ، و كود <code class="highlighter-rouge">php</code> والذي يتأكد من نوع الملف (لاحقته) ، حجم الملف ، العرض والطول بالنسبة للصور ، ويقوم برفع الملف اذا لم يكن هناك أخطاء .</p> <p>يمكنك في السكريبت تحديد نوع الملفات المسموحة (عبر اللاحقة )، الحجم الأعظمي المسموح للملف و الطول والعرض الأعظميين المسومح بهما للصور.</p> <p>يتم حفظ الملف في مجلد <code class="highlighter-rouge">upload</code> (أو المجلد الذي تحدده في متغير <code class="highlighter-rouge">uploadpath$</code> ) ، هذا المجلد يجب إنشاؤه في نفس المكان الذي يوضع فيه ملف الـ <code class="highlighter-rouge">php</code> الحاوي على هذا السكريبت . يجب أن تكون php لديها صلاحيات الكتابة في هذا المجلد <code class="highlighter-rouge">( chmod 0755 / 0777 )</code> حتى تتمكن من حفظ الملف .</p> <p>بعد رفع الملف بنجاح سيقوم السكريبت بعرض عنوان الملف على السيرفر .</p> <p>الكود :</p> <figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// Simple PHP Upload Script:  http://coursesweb.net/php-mysql/</span>

<span class="nv">$uploadpath</span> <span class="o">=</span> <span class="s1">'upload/'</span><span class="p">;</span>      <span class="c1">// directory to store the uploaded files</span>
<span class="nv">$max_size</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span>          <span class="c1">// maximum file size, in KiloBytes</span>
<span class="nv">$alwidth</span> <span class="o">=</span> <span class="mi">900</span><span class="p">;</span>            <span class="c1">// maximum allowed width, in pixels</span>
<span class="nv">$alheight</span> <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>           <span class="c1">// maximum allowed height, in pixels</span>
<span class="nv">$allowtype</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'bmp'</span><span class="p">,</span> <span class="s1">'gif'</span><span class="p">,</span> <span class="s1">'jpg'</span><span class="p">,</span> <span class="s1">'jpe'</span><span class="p">,</span> <span class="s1">'png'</span><span class="p">);</span>        <span class="c1">// allowed extensions</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$uploadpath</span> <span class="o">=</span> <span class="nv">$uploadpath</span> <span class="o">.</span> <span class="nb">basename</span><span class="p">(</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]);</span>       <span class="c1">// gets the file name</span>
  <span class="nv">$sepext</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">'.'</span><span class="p">,</span> <span class="nb">strtolower</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]));</span>
  <span class="nv">$type</span> <span class="o">=</span> <span class="nb">end</span><span class="p">(</span><span class="nv">$sepext</span><span class="p">);</span>       <span class="c1">// gets extension</span>
  <span class="k">list</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">)</span> <span class="o">=</span> <span class="nb">getimagesize</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">]);</span>     <span class="c1">// gets image width and height</span>
  <span class="nv">$err</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>         <span class="c1">// to store the errors</span>

  <span class="c1">// Checks if the file has allowed type, size, width and height (for images)</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$allowtype</span><span class="p">))</span> <span class="nv">$err</span> <span class="o">.=</span> <span class="s1">'The file: &lt;b&gt;'</span><span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]</span><span class="o">.</span> <span class="s1">'&lt;/b&gt; not has the allowed extension type.'</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'size'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$max_size</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span> <span class="nv">$err</span> <span class="o">.=</span> <span class="s1">'&lt;br/&gt;Maximum file size must be: '</span><span class="o">.</span> <span class="nv">$max_size</span><span class="o">.</span> <span class="s1">' KB.'</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$width</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$height</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$width</span> <span class="o">&gt;=</span> <span class="nv">$alwidth</span> <span class="o">||</span> <span class="nv">$height</span> <span class="o">&gt;=</span> <span class="nv">$alheight</span><span class="p">))</span> <span class="nv">$err</span> <span class="o">.=</span> <span class="s1">'&lt;br/&gt;The maximum Width x Height must be: '</span><span class="o">.</span> <span class="nv">$alwidth</span><span class="o">.</span> <span class="s1">' x '</span><span class="o">.</span> <span class="nv">$alheight</span><span class="p">;</span>

  <span class="c1">// If no errors, upload the image, else, output the errors</span>
  <span class="k">if</span><span class="p">(</span><span class="nv">$err</span> <span class="o">==</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span> <span class="nv">$uploadpath</span><span class="p">))</span> <span class="p">{</span> 
      <span class="k">echo</span> <span class="s1">'File: &lt;b&gt;'</span><span class="o">.</span> <span class="nb">basename</span><span class="p">(</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">])</span><span class="o">.</span> <span class="s1">'&lt;/b&gt; successfully uploaded:'</span><span class="p">;</span>
      <span class="k">echo</span> <span class="s1">'&lt;br/&gt;File type: &lt;b&gt;'</span><span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">.</span><span class="s1">'&lt;/b&gt;'</span><span class="p">;</span>
      <span class="k">echo</span> <span class="s1">'&lt;br /&gt;Size: &lt;b&gt;'</span><span class="o">.</span> <span class="nb">number_format</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fileup'</span><span class="p">][</span><span class="s1">'size'</span><span class="p">]</span><span class="o">/</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">'.'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span> <span class="o">.</span><span class="s1">'&lt;/b&gt; KB'</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$width</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$height</span><span class="p">))</span> <span class="k">echo</span> <span class="s1">'&lt;br/&gt;Image Width x Height: '</span><span class="o">.</span> <span class="nv">$width</span><span class="o">.</span> <span class="s1">' x '</span><span class="o">.</span> <span class="nv">$height</span><span class="p">;</span>
      <span class="k">echo</span> <span class="s1">'&lt;br/&gt;&lt;br/&gt;Image address: &lt;b&gt;http://'</span><span class="o">.</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_HOST'</span><span class="p">]</span><span class="o">.</span><span class="nb">rtrim</span><span class="p">(</span><span class="nb">dirname</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_URI'</span><span class="p">]),</span> <span class="s1">'\\/'</span><span class="p">)</span><span class="o">.</span><span class="s1">'/'</span><span class="o">.</span><span class="nv">$uploadpath</span><span class="o">.</span><span class="s1">'&lt;/b&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">echo</span> <span class="s1">'&lt;b&gt;Unable to upload the file.&lt;/b&gt;'</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="k">echo</span> <span class="nv">$err</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span> 
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin:1em auto; width:333px; text-align:center;"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'PHP_SELF'</span><span class="p">];</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">enctype=</span><span class="s">"multipart/form-data"</span><span class="nt">&gt;</span> 
  Upload File: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">"fileup"</span> <span class="nt">/&gt;&lt;br/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">'submit'</span> <span class="na">value=</span><span class="s">"Upload"</span> <span class="nt">/&gt;</span> 
 <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure> <p>إذا تم رفع الملف بنجاح ، سيقوم السكريبت بتقديم معلومات كما في المثال التالي</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	File: image.jpg successfully uploaded:

	File type: image/jpeg

	Size: 16.545 KB

	Image Width x Height: 300 x 200


	Image address: http://domain/upload/image.jpg
</code></pre></div></div> <div class="rect"> <h2>اقرأ أيضًا</h2> <a href="/send-mail-php-ubuntu/"> <li> تهيئة PHP لإرسال رسائل إلكترونية عبر سيرفر خارجي </li> </a> <a href="/Java-notes/"> <li> ملاحظات جافا </li> </a> <a href="/php-forum-from-scratch/"> <li> إنشاء منتدى PHP من الصفر </li> </a> <!-- Begin Mailchimp Signup Form --> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css"> <div id="mc_embed_signup" style="font:14px;width:100%;"> <form action="https://github.us5.list-manage.com/subscribe/post?u=ef99ab99e546f6f09993024f4&amp;id=94dda7fbb9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> <div id="mc_embed_signup_scroll"> <label for="mce-EMAIL">ابقى على اطلاع على آخر شروحاتنا التقنية</label> <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="يرجى إدخال بريدك الإلكتروني" required> <div class="clear"><input type="submit" value="اشترك" name="subscribe" id="mc-embedded-subscribe" class="button"></div> </div> </form> </div> <!--End mc_embed_signup--> </div> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- desktop --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4752855256699204" data-ad-slot="3888202602" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#PHP" title="Pages tagged PHP" class="tag"><span class="term">PHP</span></a><a href="http://localhost:4000/tags/#برمجة" title="Pages tagged برمجة" class="tag"><span class="term">برمجة</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/php-script-to-upload-file/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/php-script-to-upload-file/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <!-- Asynchronous Google Analytics snippet --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-80564042-1', 'auto'); ga('require', 'linkid', 'linkid.js'); ga('send', 'pageview'); </script> <script type="text/javascript"> var disqus_shortname = 'mulham-1'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <amp-auto-ads type="adsense" data-ad-client="ca-pub-4752855256699204"> </amp-auto-ads> </body> </html>
